<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>å˜é™ç§¯åˆ†æ±‚å¯¼çš„ç§ç§</title>
  <meta name="description" content="å˜ä¸Šé™ç§¯åˆ†æ±‚å¯¼çš„ç†è§£å‡è®¾ \(F(x)\) æ˜¯ \(f(x)\) çš„ä¸€ä¸ªåŸå‡½æ•°ï¼Œå³ \(F^{\prime}(x) = f(x)\)ã€‚é‚£ä¹ˆå¯¹ \(f(x)\) ç§¯åˆ†ï¼Œæœ‰ï¼š\[\int f(x) dx = \int F^{\prime}(x) dx= F(x) +C\]å…¶ä¸­ \(C\) æ˜¯å¸¸æ•°ï¼Œå¯ä»¥å°†å…¶è¡¨ç¤ºä¸º \(...">
  <!-- ç°ä»£å¤šå°ºå¯¸å›¾æ ‡ -->
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/img/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicon-16x16.png">
  <link rel="shortcut icon" href="/assets/img/favicon.ico" />
  <link rel="manifest" href="/assets/img/site.webmanifest" />


  <!-- Google Fonts loaded here depending on setting in _data/options.yml true loads font, blank does not-->
  
    <link href='//fonts.googleapis.com/css?family=Lato:400,400italic' rel='stylesheet' type='text/css'>
  
  
<!-- Load up MathJax script if needed ... specify in /_data/options.yml file-->
  
    <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: [
      "MathMenu.js",
      "MathZoom.js",
      "AssistiveMML.js",
      "a11y/accessibility-menu.js"
    ],
    jax: ["input/TeX", "output/CommonHTML"],
    TeX: {
      extensions: [
        "AMSmath.js",
        "AMSsymbols.js",
        "noErrors.js",
        "noUndefined.js",
      ]
    }
  });
</script>

<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>  


  <link rel="stylesheet" type="text/css" href="/css/tufte.css">
  <!-- <link rel="stylesheet" type="text/css" href="/css/print.css" media="print"> -->

  <link rel="canonical" href="http://localhost:4000/math/2022/06/05/%E5%8F%98%E9%99%90%E7%A7%AF%E5%88%86%E6%B1%82%E5%AF%BC.html">

  <link rel="alternate" type="application/rss+xml" title="From L77" href="http://localhost:4000/feed.xml" />
</head>

  <body>
    <!--- Header and pages template site-wide -->
<header>
    <nav class="group">
	<a href="/"><img class="badge" src="/assets/img/favicon.png" alt="CH"></a>
	
		
<!--		<input type="radio" id="blog" name="nav" class="nav-input">-->
		<a href="http://localhost:4000/nav/blog/index.html" class="nav-link">blog</a>
  	
		
<!--		<input type="radio" id="archive" name="nav" class="nav-input">-->
		<a href="http://localhost:4000/nav/archive.html" class="nav-link">archive</a>
  	
		
<!--		<input type="radio" id="about" name="nav" class="nav-input">-->
		<a href="http://localhost:4000/nav/about.html" class="nav-link">about</a>
  	
	<!-- å³ä¾§æœç´¢æ¡† -->
	<div class="navbar-right">
	  <div class="search-container">
		<input type="text" id="search-input" placeholder="search blog..." />
		<div id="search-results" class="search-results"></div>
	  </div>
	</div>
	</nav>


	<script>
        // é¡µé¢åŠ è½½æ—¶è®¾ç½®æ¿€æ´»çŠ¶æ€
        document.addEventListener('DOMContentLoaded', () => {
<!--            const currentPage = window.location.pathname.split('/').pop();-->
            const currentPage = window.location.href;

            document.querySelectorAll('.nav-link').forEach(link => {
                if (link.getAttribute('href') === currentPage) {
                    link.classList.add('active');
                }
            });
        });


        // å¯¼èˆªç‚¹å‡»å¤„ç†ï¼ˆå¯é€‰ï¼Œç”¨äºå•é¡µåº”ç”¨ï¼‰
        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', function(e) {
                // å¦‚æœæ˜¯å•é¡µåº”ç”¨ï¼Œå–æ¶ˆæ³¨é‡Šä»¥ä¸‹ä»£ç ï¼š
                e.preventDefault();
                window.location.href = this.href;
                history.pushState({}, '', this.href);
                document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
                this.classList.add('active');
            });
        });
    </script>
</header>
    <article>
        <div class="container">
          <nav class="toc" id="toc"></nav>
          <main class="content">
            <h1 style="text-align: left">å˜é™ç§¯åˆ†æ±‚å¯¼çš„ç§ç§</h1>
            
            
            
            <p class="subtitle" style="text-align:right"><span style="color: #c7eeeb; font-style: inherit; font-family: Gill Sans">Category:</span><span style="color: #082567; font-style: inherit;">&nbsp; MATH</span><span style="color: #c7eeeb; font-style: inherit; font-family: Gill Sans">&nbsp;&nbsp;&nbsp;Tag: &nbsp;</span><span style="color: #082567; font-style: inherit;"> å¾®ç§¯åˆ†</span></p>
            
            <h2 id="å˜ä¸Šé™ç§¯åˆ†æ±‚å¯¼çš„ç†è§£">å˜ä¸Šé™ç§¯åˆ†æ±‚å¯¼çš„ç†è§£</h2>

<p>å‡è®¾ \(F(x)\) æ˜¯ \(f(x)\) çš„ä¸€ä¸ªåŸå‡½æ•°ï¼Œå³ \(F^{\prime}(x) = f(x)\)ã€‚é‚£ä¹ˆå¯¹ \(f(x)\) ç§¯åˆ†ï¼Œæœ‰ï¼š</p>

\[\int f(x) dx = \int F^{\prime}(x) dx= F(x) +C\]

<p>å…¶ä¸­ \(C\) æ˜¯å¸¸æ•°ï¼Œå¯ä»¥å°†å…¶è¡¨ç¤ºä¸º \(-F(a)\)ã€‚å¦‚æœ \(f(x)\) åœ¨ \([a, x]\) ä¸Šè¿ç»­ï¼Œæˆ‘ä»¬å¯¹å…¶è¿›è¡Œç§¯åˆ†ï¼š</p>

\[\int_{a}^{x} f(t) dt = \int_{a}^{x} F^{\prime}(t) dt= F(x) - F(a) = F(x) + C\]

<!--more-->
<p>å› æ­¤ï¼Œå…¶ä¸­æˆ‘ä»¬ç§° \(\int_{a}^{x}f(t)dt\) ä¸º \(f(x)\) çš„å˜ä¸Šé™ç§¯çš„å®šç§¯åˆ†ï¼Œä¹Ÿç®—æ˜¯ \(f(x)\) çš„ä¸€ä¸ªåŸå‡½æ•°ã€‚åŒæ—¶æˆ‘ä»¬ä¹Ÿå¯ä»¥å¾—åˆ°ç‰›é¡¿-è±å¸ƒå°¼èŒ¨ (Newton-Leibniz) å…¬å¼ï¼š</p>

\[\int_{a}^{x=b} f(t)dt = F(b) - F(a)\]

<p>ä»¥ä¸Šä¸¥è°¨çš„æ¨å¯¼éœ€è¦é€šè¿‡ç§¯åˆ†ä¸­å€¼é…åˆå¯¼æ•°çš„å®šä¹‰æ¥è¿›è¡Œæ±‚è¯ï¼Œè¿™é‡Œæš‚æ—¶çœç•¥ä¸€æ®µã€‚å¯¹äºå˜ä¸Šé™ç§¯åˆ†æ±‚å¯¼æœ‰ï¼š</p>

\[\frac{d\int_{a}^{x} f(t) dt}{dx} = \frac{d(F(x) - F(a))}{dx} = F^{\prime}(x) = f(x)\]

<p>å¯¹äºæ›´ä¸€èˆ¬çš„æƒ…å†µï¼Œå½“ä¸Šä¸‹é™æ˜¯å…³äº \(x\) çš„å¯å¯¼å‡½æ•°æ—¶ï¼š</p>

\[\begin{aligned}\frac{d\int_{\phi(x)}^{\psi(x)} f(t)dt}{dx} &amp;= \frac{dF(\psi(x)) - F(\phi(x))}{dx} \\\\
&amp;= F^{\prime}(\psi(x))\psi^{\prime}(x) - F^{\prime}(\phi(x))\phi^{\prime}(x) \\\\
&amp;=f(\psi(x))\psi^{\prime}(x) - f(\phi(x))\phi^{\prime}(x)\end{aligned}\]

<p>å› æ­¤å¯¹å˜ä¸Šä¸‹é™ç§¯åˆ†æ±‚å¯¼æœ‰ä¸‹å¼ï¼š</p>

\[\frac{d\int_{\phi(x)}^{\psi(x)} f(t)dt}{dx} =f(\psi(x))\psi^{\prime}(x) - f(\phi(x))\phi^{\prime}(x)\]

<h2 id="åº”ç”¨ç¤ºä¾‹å±•ç¤º">åº”ç”¨ç¤ºä¾‹å±•ç¤º</h2>

<p>ä»‹ç»å®Œç†è®ºçŸ¥è¯†ï¼Œè¿™é‡Œè¿›è¡Œä¸¾ä¾‹è¿›è¡Œåº”ç”¨ã€‚å…¶ä¸­æ¶‰åŠåˆ°å˜ä¸Šé™ç§¯åˆ†æ—¶ï¼Œæ¢å…ƒæ“ä½œæ˜“å‡ºç°é”™è¯¯ä»¥åŠè¢«ç§¯å‡½æ•°åŒ…å«ç§¯åˆ†ä¸Šé™å˜é‡çš„æƒ…å†µã€‚</p>

<p>â™£ æ¢å…ƒæ˜“é”™ç¤ºä¾‹ï¼š</p>

<ul>
  <li>
    <p>é—®é¢˜ï¼š</p>

\[\frac{d}{dx}\int_{0}^{x^2}\cos(t^2)dt\]
  </li>
  <li>
    <p>å¸¸è§„è§£æ³•ï¼š</p>

\[\frac{d}{dx}\int_{0}^{x^2}\cos(t^{2})dt=2x\cdot \cos(x^4)\]
  </li>
  <li>
    <p>å­¦å¦¹çš„é”™è¯¯è§£æ³•ï¼š</p>

\[\frac{1}{2}\frac{d}{dx}\int_{0}^{x^2}\cos(t^{2})d(t^2)=x\cdot \cos(x^4)\]
  </li>
  <li>
    <p>å­¦å¦¹çš„é—®é¢˜åœ¨äºæ²¡æœ‰è¿›è¡Œä¸Šé™çš„å˜æ¢ä»¥åŠç§¯åˆ†å˜é‡çš„æ¢å…ƒæ›¿æ¢ï¼Œå› æ­¤å®¹æ˜“å‡ºç°å¤±è¯¯ï¼ˆä¸ç†Ÿæ‚‰æ—¶ä¸å»ºè®®è¿™ä¹ˆåšï¼‰ï¼Œå’±ä»¬æŒ‰æ­¥éª¤æ¥ï¼š</p>

    <ul>
      <li>
        <p>å…ˆè¿›è¡Œç§¯åˆ†å˜é‡çš„æ›¿æ¢ï¼Œä»¤ \(a = t^2\)ï¼Œæœ‰ \(da =d(t^2) \rightarrow da = 2tdt \rightarrow \frac{da}{2t} = dt\)</p>
      </li>
      <li>
        <p>ç„¶åè¿›è¡Œç§¯åˆ†ä¸Šä¸‹é™çš„è®¡ç®—ï¼Œå½“ \(t=0\) æ—¶ï¼Œ\(a=0\)ï¼›å½“ \(t=x^2\) æ—¶ï¼Œ\(a=x^4\)ã€‚å¸¦å…¥æœ‰ï¼š</p>

\[\begin{aligned}
&amp;\frac{d}{dx}\int_{0}^{x^4}\cos a\frac{da}{2t} \\\\
&amp;\because a = t^2 \Rightarrow t = \sqrt{a} \\\\
&amp;\Rightarrow \frac{d}{dx}\int_{0}^{x^4}\frac{\cos a}{2\sqrt{a}}da \\\\
&amp;\Rightarrow \frac{\cos(x^4)}{2\sqrt{x^4}}dx^4 = 2x\cdot \cos(x^4)
\end{aligned}\]
      </li>
    </ul>
  </li>
</ul>

<p>â™  è¢«ç§¯å‡½æ•°åŒ…å«ç§¯åˆ†ä¸Šé™å˜é‡ç¤ºä¾‹ï¼š</p>

<p>æœ¬ç¤ºä¾‹å€Ÿç”¨ä¸€ä¸ªå­¦é•¿æ¢ç©¶ Newton-Leibniz å…¬å¼ä¸ Navier-Stokes æ–¹ç¨‹å…³ç³»æ—¶ï¼Œç¤ºèŒƒå®¹æ˜“å‡ºç°å˜ä¸Šé™ç§¯åˆ†æ±‚å¯¼æ—¶çŠ¯çš„é”™è¯¯ï¼Œå­¦é•¿æœ¬èº«çš„æ¨å¯¼æ²¡æœ‰é”™ï¼Œåªæ˜¯è§‰å¾—å¯ä»¥ç”¨æ¥æé†’å…¶ä»–åŒå­¦ï¼š</p>

<ul>
  <li>
    <p>é—®é¢˜ï¼š</p>

    <p>æ±‚å˜ä¸Šé™ç§¯åˆ† \(\int_{a(t)}^{b(t)} f(x, t)dx\) çš„å¯¼æ•°</p>

    <p>å°† N-S æ–¹ç¨‹ \(\frac{\partial \rho}{\partial t}+ \frac{\partial (\rho \mu)}{\partial t} = 0\) ä¸ä¸Šå¼è¿›è¡Œè”ç³»</p>
  </li>
  <li>
    <p>è§£ç­”ï¼š</p>

    <p>æˆ‘ä»¬å°†ä¸Šè¿°å¼å­å…·è±¡åŒ–ï¼Œä½¿ç”¨ä¸€ç»´æµåŠ¨å‡è®¾è¿›è¡Œè”ç³»ï¼Œå‡è®¾ä¸‹è¿°æ˜¯ä¸€æ ¹æ— é™é•¿çš„æ°´ç®¡ï¼Œåœ¨ \(t\) æ—¶åˆ»æœ‰ä¸€æ»´æ°´ï¼ˆæ©™è‰²éƒ¨åˆ†ï¼‰ï¼Œå…¶å¯†åº¦ä¸æ—¶é—´å’Œç©ºé—´çš„å‡½æ•°ä¸ºï¼š \(\rho(x, t)\) ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæ°´æ»´çš„è¾¹ç•Œä¸º \(a(t)\) å’Œ \(b(t)\) ã€‚ç»è¿‡æ—¶é—´ \(\Delta t\) ï¼Œæ°´æ»´ä½ç½®å˜ä¸º  \(a(t+\Delta t)\) å’Œ \(b(t+\Delta t)\) ï¼Œå¯†åº¦å˜ä¸º \(\rho(x, t+\Delta t)\)ï¼ˆè“è‰²éƒ¨åˆ†ï¼‰ã€‚</p>

    <figure class="fullwidth"><img src="/assets/å˜é™ç§¯åˆ†æ±‚å¯¼/1.png" /><figcaption></figcaption></figure>

    <p>åœ¨è¿™è¿…é€Ÿå˜åŒ–çš„ä¸–ç•Œï¼Œæˆ‘ä»¬åº”è¯¥æ‰¾å¯»ä¸å˜çš„çœŸç†ã€‚è¿™é‡Œçš„çœŸç†å°±æ˜¯è´¨é‡å®ˆæ’å®šå¾‹ï¼Œæ°´æ»´ä¸å¯èƒ½è·‘ç€è·‘ç€è´¨é‡è¿˜å‡å°‘äº†å§ï¼Œæè¿™å„¿å‡è‚¥å‘¢ï¼Ÿå› æ­¤æ°´æ»´çš„è´¨é‡å¯ä»¥ç”±\(m(t)=\int_{a(t)}^{b(t)}\rho(x,t)dx\) æ±‚å¾—ï¼Œç”±è´¨é‡å®ˆæ’å®šå¾‹ï¼Œå³è´¨é‡å¯¹æ—¶é—´çš„å¯¼æ•°ä¸º 0ï¼Œæœ‰ï¼š</p>

\[\frac{dm}{dt} = \frac{d}{dt}\int_{a(t)}^{b(t)}\rho(x,t)dx = 0\]

    <p>è¿™é‡Œæ˜¯ä¸æ˜¯å¾ˆçœ¼ç†Ÿäº†ï¼Œä¸å°±æ˜¯å˜ä¸Šé™ç§¯åˆ†æ±‚å¯¼å—ï¼Ÿæ¡¥è±†éº»è¢‹ï¼Œè¢«ç§¯å‡½æ•°å«æœ‰ä¸Šé™å˜é‡ \(t\) ï¼Œè¿˜èƒ½ä½¿ç”¨å…¶ä¹‹å‰çš„æ–¹æ³•ç›´æ¥æ±‚å¯¼å—ï¼Ÿæˆ‘ä»¬ä¸¾ä¸ªä¾‹å­è¯•è¯•ï¼š</p>

    <p>é¢˜ç›®ï¼š</p>

\[\frac{d}{dx}\int_{0}^{x^2} xt^{2}dt\]

    <p>è§£æ³•ä¸€ï¼šç›´æ¥å¯¹å˜ä¸Šé™ç§¯åˆ†ç›´æ¥æ±‚å¯¼</p>

\[\frac{d}{dx}\int_{0}^{x^2} xt^{2}dt=2x\cdot x \cdot x^4 = 2x^6\]

    <p>è§£æ³•äºŒï¼šå…ˆç§¯åˆ†åæ±‚å¯¼ï¼Œå› ä¸º \(x\) ä¸æ˜¯ç§¯åˆ†å˜é‡ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ç›´æ¥å°†å…¶æåˆ°ç§¯åˆ†å·çš„å¤–é¢</p>

\[\begin{aligned}
\frac{d}{dx}\int_{0}^{x^2} xt^{2}dt&amp;=\frac{d}{dx}x\int_{0}^{x^2} t^{2}dt \\\\
&amp;=\frac{d}{dx}x\cdot \frac{1}{3}t^3 \Bigg|^{x^2}_{0} = \frac{7x^6}{3}
\end{aligned}\]

    <p>è§£æ³•ä¸‰ï¼šå°† \(x\) æ”¾åˆ°ç§¯åˆ†å·å¤–é¢ï¼Œå¯¹é‡Œé¢çš„ä½¿ç”¨å˜ä¸Šé™ç§¯åˆ†æ±‚å¯¼</p>

\[\begin{aligned}
\frac{d}{dx}\int_{0}^{x^2} xt^{2}dt&amp;=\frac{d}{dx}x \cdot\int_{0}^{x^2} t^{2}dt \\\\
&amp;=\int_{0}^{x^2} t^{2}dt + x \cdot 2x \cdot (x^2)^2 = \frac{7x^6}{3}
\end{aligned}\]

    <p>æ˜¾ç„¶è§£æ³•äºŒå’Œè§£æ³•ä¸‰æ˜¯æ­£ç¡®çš„ã€‚åœ†è§„æ­£è½¬ï¼Œç”±ä¸Šå¯çŸ¥æˆ‘ä»¬ä¸èƒ½ç›´æ¥å¯¹ \(\rho(x,t)\) ä½¿ç”¨å˜ä¸Šé™ç§¯åˆ†æ±‚å¯¼ã€‚å¯æ˜¯æˆ‘ä»¬æ— æ³•ç›´æ¥å…ˆç§¯åˆ†åæ±‚å¯¼ï¼Œä¹Ÿæ— æ³•å°† \(t\) åˆ†å‡ºæ¥ã€‚æ‰€ä»¥åªèƒ½é‡‡å–æœ€åŸå§‹çš„åŠæ³•ï¼Œå³ä½¿ç”¨å¯¼æ•°å®šä¹‰çš„æ–¹å¼æ¥æ±‚è§£äº†ï¼š</p>

\[\frac{dm}{dt} = \lim_{\Delta t\rightarrow 0}\frac{1}{\Delta t}\Bigg(\int_{a(t+\Delta t)}^{b(t+\Delta t)}\rho(x,t+\Delta t)dx-\int_{a(t)}^{b(t)}\rho(x,t)dx\Bigg)\]

    <p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸Šè¿°åˆ†æ¯æ—¢æœ‰ç§¯åˆ†ä¸Šä¸‹é™çš„å˜åŒ–ï¼Œä¹Ÿæœ‰è¢«ç§¯å‡½æ•°çš„å˜åŒ–ã€‚å‰è€…æ˜¯ç©ºé—´çš„å˜åŒ–ï¼Œåè€…æ˜¯æ—¶é—´çš„å˜åŒ–ã€‚å› æ­¤æˆ‘ä»¬å¾—æŠŠæ—¶ç©ºåˆ†ç¦»å¼€æ¥ï¼š</p>

\[\begin{aligned}
\frac{dm}{dt} = \lim_{\Delta t\rightarrow 0}\frac{1}{\Delta t}\Bigg(\int_{b(t)}^{b(t+\Delta t)}\rho(x,t+\Delta t)dx&amp;+\int_{a(t+\Delta t)}^{a(t)}\rho(x,t+\Delta t)dx \\\\ + \int_{a(t)}^{b(t)}\rho(x,t+\Delta t)dx &amp;-\int_{a(t)}^{b(t)}\rho(x,t)dx\Bigg)
\end{aligned}\]

    <p>ä¸Šå¼å‰é¢ä¸¤é¡¹æ˜¯å·¦å³è¾¹ç•Œçš„å˜åŒ–ï¼ˆç©ºé—´çš„å˜åŒ–ï¼‰ï¼Œå› ä¸ºè¢«ç§¯å‡½æ•°ä¿æŒä¸€è‡´ã€‚åé¢ä¸¤é¡¹åˆ™æ˜¯å¯†åº¦åœºéšæ—¶é—´çš„å˜åŒ–ã€‚å‰ä¸¤é¡¹åˆ†åˆ«æ˜¯ç§¯åˆ†ä¸Šé™å’Œä¸‹é™å˜åŒ–ï¼Œå› æ­¤ä½¿ç”¨å˜é™ç§¯åˆ†æ±‚å¯¼ï¼š</p>

\[\begin{aligned}
\lim_{\Delta t\rightarrow 0}\frac{1}{\Delta t}\int_{b(t)}^{b(t+\Delta t)}\rho(x,t+\Delta t)dx &amp;= \rho(b(t),t)\frac{db(t)}{dt}=\rho(b(t),t)\mu(b(t),t) \\\\
\lim_{\Delta t\rightarrow 0}\frac{1}{\Delta t}\int_{a(t+\Delta t)}^{a(t)}\rho(x,t+\Delta t)dx &amp;= \rho(a(t),t)\Big(-\frac{da(t)}{dt}\Big)=\rho(b(t),t)\mu(a(t),t) 
\end{aligned}\]

    <p>å…¶ä¸­ \(\mu(x,t)\) ä¸ºé€Ÿåº¦åœºã€‚ä½¿ç”¨ç‰›é¡¿-è±å¸ƒå°¼å…¹å…¬å¼å°†å…¶åˆå¹¶ï¼š</p>

\[\rho(b(t),t)\frac{db(t)}{dt}-\rho(a(t),t)\frac{da(t)}{dt} =\int_{a(t)}^{b(t)}\frac{\partial (\rho(x,t)\mu(x,t))}{\partial x}dx\]

    <p>åä¸¤é¡¹ç§¯åˆ†ä¸Šä¸‹é™ä¸€è‡´ï¼Œå¯è§æ˜¯å¯¹å¯†åº¦å‡½æ•°çš„æ±‚å¯¼ï¼Œæ˜“å¾—ï¼š</p>

\[\lim_{\Delta t\rightarrow 0}\frac{1}{\Delta t}\Bigg(\int_{a(t)}^{b(t)}\rho(x,t+\Delta t)-\rho(x,t)dx\Bigg)=\int_{a(t)}^{b(t)}\frac{\partial \rho(x,t)}{\partial t}dx\]

    <p>å°†ä¸Šè¿°ä¸¤ä¸ªç»“æœæ•´ç†å¾—åˆ°æœ€åæ±‚å¯¼ç»“æœï¼š</p>

\[\frac{dm}{dt} = \int_{a(t)}^{b(t)}\Bigg(\frac{\partial (\rho(x,t)\mu(x,t))}{\partial x}+\frac{\partial \rho(x,t)}{\partial t} \Bigg)dx = 0\]

    <p>å¯¹äºä»»æ„æˆç«‹çš„ \(a(t)\) å’Œ \(b(t)\) ä½ç½®ï¼Œæœ‰ï¼š</p>

\[\frac{\partial \rho(x,t)}{\partial t}+\frac{\partial (\rho(x,t)\mu(x,t))}{\partial x} = 0\]

    <p>è¿™ä¾¿æ˜¯ä¸€ç»´çš„æµåŠ¨è¿ç»­æ€§æ–¹ç¨‹ï¼Œå¯¹äºåŠ¨é‡ã€åŠ¨é‡çŸ©ã€èƒ½é‡ç§¯åˆ†ï¼Œä¾¿å¯å¾—åˆ°å®Œæ•´çš„ NS æ–¹ç¨‹ã€‚</p>

    <p>ğŸŒ¸ğŸŒ¸ğŸŒ¸ è¿™æ®µæ•…äº‹å®Œç»“ ğŸŒˆğŸŒˆğŸŒˆ</p>
  </li>
</ul>

            <p class="subtitle" style="text-align:right"><span style="color: #ffb6c1; font-style: inherit;">June 5, 2022</span></p>
          </main>
        </div>
    </article>
    <script>
    // åŠ¨æ€ç”Ÿæˆæ–‡ç« åˆ—è¡¨ï¼ˆå‡è®¾æ¯ç¯‡æ–‡ç« æœ‰æ ‡é¢˜ã€å†…å®¹å’Œé“¾æ¥ï¼‰
    const articles = [
      
        {
          title: "DETR SERIES",
          content: "ğŸæœ¬ç¯‡æ–‡ç« ä¸»è¦å¯¹ DETR çš„ç›¸å…³ç±»å®¹è¿›è¡Œç®€å•çš„ä»‹ç»ï¼Œå†…å®¹æ¶‰åŠDETRã€Deformable DETRã€DAB-DETRã€DN-DETR å’Œ DINO ç­‰ Transformer åœ¨ç›®æ ‡æ£€æµ‹é¢†åŸŸåº”ç”¨çš„ç®—æ³• # DETR ## Framework {% fullwidth &#39;assets/detr-series/1.png&#39; &quot;&quot; %} DETR ç®—æ˜¯ Transformer åœ¨è§†è§‰é¢†åŸŸåº”ç”¨çš„ç¬¬ä¸€ç¯‡æ–‡ç« ï¼Œè‡³å°‘æ˜¯æˆ‘è¯»è¿‡çš„ç¬¬ä¸€ç¯‡ï¼Œå³Â End-to-End Object Detection with Transformersã€‚å¯ä»¥çœ‹å‡º image é€šè¿‡ CNN æˆ–è€… Transformer ä½œä¸º backbone è¿›è¡Œæå– featureï¼Œç„¶åç»è¿‡ Transformer è¿›è¡Œè¿›ä¸€æ­¥çš„ç‰¹å¾æå–ï¼Œæœ€åé€å…¥æ£€æµ‹å¤´é¢„æµ‹ ## Transformer {% fullwidth &#39;assets/detr-series/2.jpg&#39; &quot;&quot; %} æ˜¾ç„¶åœ¨ DETR ä¸­æœ€é‡è¦çš„å°±æ˜¯ Transformer äº†ã€‚å…¶æ˜¯ç”±å¤šä¸ª encoder...",
          url: "/ai/2023/05/19/detr-series.html"
        },
      
        {
          title: "CUDA ç¼–ç¨‹ï¼ˆè¿›é˜¶ç¯‡ï¼‰",
          content: "# General Matrix Multiplication GEMM ä¼˜åŒ–æœ¬èº«æ˜¯ä¸€ä¸ªéå¸¸å€¼å¾—è®¨è®ºçš„è¯¾é¢˜ï¼Œå…¶ä¼˜åŒ–ä¹Ÿæ¶‰åŠ GPU ä¸­ä¼˜åŒ–çš„å¤§å¤šæ•°å¸¸ç”¨çš„æŠ€å·§ã€‚è¿™éƒ¨åˆ†ä»¥è§£æçŸ¥ä¹å¤§ä½¬æœ‰äº†ç¦ç¦çš„æ£å­[æ–‡ç« ](https://zhuanlan.zhihu.com/p/435908830)ä¸­çš„ä»£ç è¿›è¡Œè§£è¯»ï¼Œä¹Ÿä½œä¸ºä»£ç é˜…è¯»ç¬”è®°æ¢³ç†æ•´ä¸ªæ€è·¯ã€‚ é¦–å…ˆï¼Œå…¶ä¼˜åŒ–æŠ€å·§**åˆ†å—è®¡ç®—**ã€**shared memory çš„å¤šæ¬¡åˆ©ç”¨**ã€**register çš„å¤šæ¬¡åˆ©ç”¨**ä»¥åŠ**å„ç§ bank çš„ conflict è§£å†³**ï¼Œæœ‰çš„ç”šè‡³ä¼šæ¶‰åŠåˆ°æ±‡ç¼–å±‚é¢çš„ä¼˜åŒ–ï¼Œè¿™é‡Œæœ‰äº›æŠ€å·§åœ¨åŸºç¡€ç¯‡å·²ç»è®²è¿‡ï¼Œå°±ä¸å†èµ˜è¿°äº†ã€‚ å…¶æ¬¡ï¼Œç®€å•å™è¿°ä¸€ä¸‹ä¼˜åŒ–çš„æ€è·¯ï¼Œä¸»è¦çš„æ€è·¯å°±æ˜¯å¯¹çŸ©é˜µè¿›è¡Œåˆ†å—è®¡ç®—ï¼Œä¸åŒ block è´Ÿè´£è®¡ç®—å‡º C ä¸­çš„ä¸åŒéƒ¨åˆ†ï¼ŒåŒæ—¶åœ¨ block å†…åˆè®©ä¸åŒçº¿ç¨‹è´Ÿè´£ä¸åŒéƒ¨åˆ†ï¼Œè¿™é‡Œé¢ä¸ºäº†èƒ½å¤šæ¬¡åˆ©ç”¨ shared memoryï¼Œéœ€è¦è¿›è¡Œå¤šæ¬¡å¾ªç¯ï¼Œå› æ­¤åœ¨ block å†…æœ‰å¤šæ¬¡å¤§å¾ªç¯ï¼Œåœ¨å¤§å¾ªç¯å†…åˆæœ‰æ¯ä¸ªçº¿ç¨‹ä¸­çš„å¤šæ¬¡å°å¾ªç¯ã€‚å› ä¸ºæ¶‰åŠåˆ°æŠŠæ•°æ®ä¸æ–­æ¬åˆ° shared memoryï¼Œæ‰€ä»¥ä½œè€…è®¾è®¡äº†é¢„å– prefetch çš„åšæ³•ï¼Œè¿™æ ·åšå¯ä»¥æ©ç›– io çš„ latencyï¼Œå› æ­¤ä¹Ÿè¦è®¾è®¡å“ªäº›çº¿ç¨‹æ¬è¿å“ªäº›æ•°æ®ã€‚ç”±äºå¯èƒ½åœ¨è®¿é—® shared memory çš„æ—¶å€™æœ‰ bank conflictï¼Œæ‰€ä»¥ä¹Ÿè¦è®¾è®¡å“ªäº›çº¿ç¨‹è®¿é—®å“ªäº›å†…å­˜ã€‚ ## åˆ†å—è®¡ç®—çš„æ€è·¯ é¦–å…ˆå¦‚ä¸‹å›¾ï¼Œå¯¹ C è¿›è¡Œåˆ†å—ï¼š {% fullwidth &#39;assets/cuda2/1.png&#39; &quot;&quot; %} ç”±å›¾å¯çŸ¥ï¼ŒC...",
          url: "/ai/2023/02/09/cuda2.html"
        },
      
        {
          title: "CUDA ç¼–ç¨‹ï¼ˆåŸºç¡€ç¯‡ï¼‰",
          content: "## ç®€ä»‹ cuda å…³äºçŸ©é˜µç›¸å…³è¿ç®—çš„å…¥é—¨ç¼–ç¨‹åŠç›¸å…³æŠ€å·§ï¼Œæ˜¯æˆ‘çš„å­¦ä¹ ç¬”è®°ï¼Œæ¯”è¾ƒé€‚åˆåˆå­¦è€…ã€‚ ## çŸ©é˜µç›¸åŠ  è¿™ä¸€èŠ‚é€šè¿‡çŸ©é˜µç›¸åŠ æ¥ä»‹ç» cuda ç¼–ç¨‹çš„å¸¸è§„æµç¨‹ï¼Œå¹¶ä»‹ç»ä¸€äº›æœ¯è¯­ ### æµç¨‹ * memory allocÂ  ç”¨äºåœ¨ gpu ä¸Šå¼€è¾Ÿç©ºé—´ ```c++ cudaMalloc((void**) &amp;d_o, sizeof(float) * (M * N)); cudaMalloc((void**) &amp;d_a, sizeof(float) * (M * N)); cudaMalloc((void**) &amp;d_b, sizeof(float) * (M * N)); ``` å…¶ä¸­ M å’Œ N åˆ†åˆ«æ˜¯çŸ©é˜µçš„è¡Œå’Œåˆ— * copy data ```c++ cudaMemcpy(d_o,...",
          url: "/ai/2023/01/01/cuda1.html"
        },
      
        {
          title: "YoloV7 æ ‡ç­¾åŒ¹é…åŠ loss è®¡ç®—è§£æ",
          content: "ğŸæœ¬ç¯‡æ–‡ç« ä¸»è¦å¯¹ YoloV7 çš„åå¤„ç†è¿›è¡Œè¯¦ç»†è®²è§£ï¼ŒYoloV7 é™¤äº†ç»“æ„ä¸Šï¼Œå¯¹å‰åå¤„ç†éƒ½è¿›è¡Œäº†æ”¹è¿›ï¼Œå…¶ä½™åŒ…æ‹¬ schedulerã€optimizer ç­‰ä¸ YoloV6 éƒ½æ˜¯ä¿æŒä¸€è‡´çš„ã€‚è€Œå‰å¤„ç†ä¸­çš„å¤šæ•° trick ä¹Ÿå¯ä»¥ç”±å…¶ä»–ï¼Œä¾‹å¦‚ X ä¸­çš„æ•°æ®å¢å¼ºæ–¹å¼æ›¿ä»£ã€‚å› æ­¤æˆ‘ä»¬ç€é‡ä»‹ç»åå¤„ç†éƒ¨åˆ† {% fullwidth &#39;assets/yolov7/1.png&#39; &quot;&quot; %} å¦‚ä¸Šå¦‚æ‰€ç¤ºï¼ŒYoloV7 åŒå¤§å¤šæ•°å•é˜¶æ®µç›®æ ‡æ£€æµ‹ç®—æ³•å±äºå¯†é›†æ£€æµ‹ (dense detection)ã€‚ä¸Šå›¾æ˜¯ä¸€ä¸ª 7x7 çš„ç‰¹å¾å›¾çº¢è‰²çš„ç‚¹æ˜¯åŸºäºç‰¹å¾å›¾çš„ç½‘æ ¼ç‚¹ï¼Œè¿›è¡Œåç§»åçš„ç‚¹ï¼Œç„¶ååœ¨å…¶ä¸Šé“ºè®¾ anchor boxï¼Œæ¯ä¸ªç‚¹é“ºè®¾ä¸€å®šæ•°é‡çš„ anchorã€‚å½“ç„¶ä¹Ÿæœ‰ç›´æ¥åœ¨ç½‘æ ¼ç‚¹ä¸Šè¿›è¡Œé“ºè®¾çš„ï¼Œä¸€èˆ¬æ¥è®²æ²¡æœ‰å¤ªå¤§å·®åˆ«ã€‚ä¸‹é¢æˆ‘ä»¬å¼€å§‹ä»‹ç» v7 åå¤„ç†ï¼Œä¸»è¦åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼šæ ‡ç­¾åŒ¹é…å’Œ loss è®¡ç®— # Label Assignment ğŸ“„æ ‡ç­¾åŒ¹é…ä¸»è¦åˆ†ä¸ºä¸¤æ­¥ï¼šå…ˆæ˜¯è¿›è¡Œ**ç²—ç­›**ï¼Œç„¶åæ˜¯è¿›è¡Œ**ç²¾ç­›** ## Find-3-Positive ğŸ“‘é¡¾åæ€ä¹‰ï¼Œç¬¬ä¸€æ­¥æ˜¯æ‰¾åˆ°ä¸‰ä¸ªæ­£æ ·æœ¬ï¼Œå°±æ˜¯å¯¹äºæ¯ä¸€ä¸ª GT æ‰¾åˆ°ä¸Šå›¾çš„ä¸‰ä¸ª anchor ä½œä¸ºæ­£æ ·æœ¬ã€‚é¦–å…ˆæˆ‘ä»¬å…ˆå¤§æ¦‚è®²ä¸€ä¸‹åŒ¹é…çš„è§„åˆ™ {% fullwidth &#39;assets/yolov7/2.png&#39; &quot;&quot; %} å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå¯¹äºæ¯ä¸€ä¸ªç½‘æ ¼ï¼Œä¼šè¢«åˆ†ä¸ºå››ä¸ªéƒ¨åˆ†ï¼Œ**ç»¿è‰²ç‚¹**æ˜¯ GT ä¸­å¿ƒç‚¹ï¼Œ**è“è‰²ç‚¹**æ˜¯åŒ¹é…ç»™ GT...",
          url: "/ai/2022/11/06/yolov7.html"
        },
      
        {
          title: "Rank &amp; Sort Loss è§£è¯»",
          content: "Rank &amp; Sort Loss for Object Detection and Instance Segmentation è¿™ç¯‡æ–‡ç« ç®—æ˜¯æˆ‘è¯»çš„ detection æ–‡ç« é‡Œé¢æ¯”è¾ƒéš¾ç†è§£çš„ï¼ŒåŸå› å¯èƒ½åœ¨äºï¼šåˆ›æ–°çš„ç‚¹è·Ÿæ™®é€šçš„ä¹Ÿä¸å¤ªä¸€æ ·ï¼›æ–‡ç« é‡Œé¢æ¯”è¾ƒå¤šå…¬å¼ã€‚ä½†ä¹‹å‰ä¹Ÿæœ‰è·Ÿè¿™æ–¹é¢çš„å·¥ä½œå¦‚ [AP Loss](https://github.com/cccorn/AP-loss)ã€[aLRPLoss](https://github.com/CV-IP/aLRPLoss) ç­‰ã€‚å®ƒä»¬éƒ½æ˜¯ä¸ºäº†è§£å†³ä¸€ä¸ªé—®é¢˜ï¼šå•é˜¶æ®µç›®æ ‡æ£€æµ‹å™¨åˆ†ç±»å’Œå›å½’åœ¨è®­ç»ƒå’Œé¢„æµ‹ä¸ä¸€è‡´çš„é—®é¢˜ã€‚é‚£ä¹ˆ Rank &amp; Sort Loss åˆåœ¨ä»¥ä¸Šçš„å·¥ä½œè¿›è¡Œäº†ä»€ä¹ˆæ”¹è¿›å‘¢ï¼Ÿåˆè§£å†³äº†ä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿ ## å…³äºè®­ç»ƒé¢„æµ‹ä¸ä¸€è‡´çš„é—®é¢˜ ç®€å•æ¥è¯´ï¼Œå°±æ˜¯åœ¨åˆ†ç±»å’Œå›å½’åœ¨è®­ç»ƒçš„æ—¶å€™æ˜¯åˆ†å¼€çš„è®­ç»ƒï¼Œè®¡ç®— loss å¹¶è¿›è¡Œåå‘ä¼˜åŒ–ã€‚ä½†æ˜¯åœ¨é¢„æµ‹çš„æ—¶å€™å´æ˜¯ç”¨åˆ†ç±»åˆ†æ•°æ’åºæ¥è¿›è¡Œ nms åå¤„ç†ã€‚è¿™é‡Œå¯èƒ½å¯¼è‡´ä¸€ç§æƒ…å†µå°±æ˜¯åˆ†ç±»åˆ†æ•°å¾ˆé«˜ï¼Œä½†æ˜¯å›å½’ä¸å¥½ï¼ˆè¿™ä¸ªé—®é¢˜åœ¨ FCOS ä¸­æœ‰é˜è¿°ï¼‰ã€‚ ## ä¹‹å‰çš„å·¥ä½œ å¸¸è§çš„ç›®æ ‡æ£€æµ‹ç½‘ç»œä¸€èˆ¬ä¼šä½¿ç”¨ nms ä½œä¸ºåå¤„ç†ï¼Œè¿™æ—¶æˆ‘ä»¬å¸¸å¸¸å¸Œæœ›æ‰€æœ‰æ­£æ ·æœ¬çš„å¾—åˆ†æ’åœ¨è´Ÿæ ·æœ¬å‰é¢ï¼Œå¦å¤–æˆ‘ä»¬è¿˜å¸Œæœ›ä½ç½®é¢„æµ‹æ›´å‡†ç¡®çš„æ¡†æœ€åè¢«ç•™ä¸‹æ¥ã€‚ä¹‹å‰çš„ AP Loss å’Œ aLRP Loss ç”±äºéœ€è¦é™„åŠ çš„ head æ¥è¿›è¡Œåˆ†ç±»ç²¾åº¦å’Œä½ç½®ç²¾åº¦ç»¼åˆè¯„ä»·ï¼ˆå…¶å®å°±æ˜¯ä¸ºäº†æ¶ˆé™¤åˆ†ç±»å’Œå›å½’çš„ä¸ä¸€è‡´é—®é¢˜ï¼Œå¦‚ FCOS çš„ centernessã€IoU head ä¹‹ç±»çš„ï¼‰ï¼Œç¡®å®åœ¨è§£å†³ç±»åˆ«ä¸å‡è¡¡é—®é¢˜ï¼ˆæ­£è´Ÿæ ·æœ¬ä¸å‡è¡¡ï¼‰ç­‰æœ‰ç€ä¸é”™çš„æ•ˆæœï¼Œä½†æ˜¯éœ€è¦æ›´å¤šçš„æ—¶é—´å’Œæ•°æ®å¢å¼ºæ¥è¿›è¡Œè®­ç»ƒã€‚ ## Rank...",
          url: "/ai/2022/08/08/Rank-Sort-Loss.html"
        },
      
        {
          title: "å˜é™ç§¯åˆ†æ±‚å¯¼çš„ç§ç§",
          content: "å˜ä¸Šé™ç§¯åˆ†æ±‚å¯¼çš„ç†è§£ å‡è®¾ \(F(x)\) æ˜¯ \(f(x)\) çš„ä¸€ä¸ªåŸå‡½æ•°ï¼Œå³ \(F^{\prime}(x) = f(x)\)ã€‚é‚£ä¹ˆå¯¹ \(f(x)\) ç§¯åˆ†ï¼Œæœ‰ï¼š \[\int f(x) dx = \int F^{\prime}(x) dx= F(x) +C\] å…¶ä¸­ \(C\) æ˜¯å¸¸æ•°ï¼Œå¯ä»¥å°†å…¶è¡¨ç¤ºä¸º \(-F(a)\)ã€‚å¦‚æœ \(f(x)\) åœ¨ \([a, x]\) ä¸Šè¿ç»­ï¼Œæˆ‘ä»¬å¯¹å…¶è¿›è¡Œç§¯åˆ†ï¼š \[\int_{a}^{x} f(t) dt = \int_{a}^{x} F^{\prime}(t) dt= F(x) - F(a) = F(x) + C\] å› æ­¤ï¼Œå…¶ä¸­æˆ‘ä»¬ç§° \(\int_{a}^{x}f(t)dt\) ä¸º \(f(x)\) çš„å˜ä¸Šé™ç§¯çš„å®šç§¯åˆ†ï¼Œä¹Ÿç®—æ˜¯ \(f(x)\) çš„ä¸€ä¸ªåŸå‡½æ•°ã€‚åŒæ—¶æˆ‘ä»¬ä¹Ÿå¯ä»¥å¾—åˆ°ç‰›é¡¿-è±å¸ƒå°¼èŒ¨...",
          url: "/math/2022/06/05/%E5%8F%98%E9%99%90%E7%A7%AF%E5%88%86%E6%B1%82%E5%AF%BC.html"
        },
      
        {
          title: "Tufte-style Jekyll blog",
          content: "The Tufte Jekyll theme is an attempt to create a website design with the look and feel of Edward Tufteâ€™s books and handouts. Tufteâ€™s style is known for its extensive use of sidenotes, tight integration of graphics with text, and well-set typography. The idea for this project is essentially cribbed...",
          url: "/%E6%95%99%E7%A8%8B/2020/04/13/tufte-style-jekyll-blog.html"
        },
      
    ];

    // è·å– DOM å…ƒç´ 
    const searchInput = document.getElementById("search-input");
    const searchResults = document.getElementById("search-results");

    // ç›‘å¬è¾“å…¥æ¡†çš„å˜åŒ–
    searchInput.addEventListener("input", function () {
      const query = this.value.trim().toLowerCase();

      // æ¸…ç©ºç»“æœå®¹å™¨
      searchResults.innerHTML = "";
      searchResults.style.display = "none";

      if (!query) return;

      // è¿‡æ»¤åŒ¹é…çš„æ–‡ç« 
      const results = articles.filter((article) => {
        return (
          article.title.toLowerCase().includes(query) ||
          article.content.toLowerCase().includes(query)
        );
      });

      // æˆªæ–­ç»“æœä¸ºæœ€å¤š 10 æ¡
      const limitedResults = results.slice(0, 50);

      // æ˜¾ç¤ºæœç´¢ç»“æœ
      if (limitedResults.length > 0) {
        limitedResults.forEach((result) => {
          const resultItem = document.createElement("a");
          resultItem.href = result.url;
          resultItem.textContent = result.title;
          resultItem.title = result.content; // æç¤ºéƒ¨åˆ†å†…å®¹
          searchResults.appendChild(resultItem);
        });
        searchResults.style.display = "block";
      } else {
        // æ˜¾ç¤ºæ— ç»“æœæç¤º
        const noResult = document.createElement("div");
        noResult.textContent = "No Result or Error Title";
        noResult.style.padding = "20px 20px";
        noResult.style.color = "#082567";
        searchResults.appendChild(noResult);
        searchResults.style.display = "block";
      }
    });

    // ç‚¹å‡»é¡µé¢å…¶ä»–åŒºåŸŸæ—¶éšè—æœç´¢ç»“æœ
    document.addEventListener("click", function (e) {
      if (!searchInput.contains(e.target) && !searchResults.contains(e.target)) {
        searchResults.style.display = "none";
      }
    });

    // è¿”å›é¡¶éƒ¨åŠŸèƒ½å®ç°
    document.addEventListener('DOMContentLoaded', () => {
      const backToTop = document.getElementById('backToTop');

      // æ»šåŠ¨ç›‘å¬ [[7]]
      window.addEventListener('scroll', () => {
        if (window.pageYOffset > 100) {
          backToTop.classList.add('show');
        } else {
          backToTop.classList.remove('show');
        }
      });

      // å¹³æ»‘æ»šåŠ¨ [[9]]
      backToTop.addEventListener('click', (e) => {
        e.preventDefault();
        window.scrollTo({
          top: 0,
          behavior: 'smooth'
        });
      });
    });

    function generateTOC() {
      const toc = document.getElementById('toc');
      const headings = document.querySelectorAll('h1, h2');

      headings.forEach(heading => {
        if (!heading.id) {
          // ä½¿ç”¨æ ‡å‡†åŒ–ç¼–ç æ–¹å¼
          heading.id = encodeURIComponent(
            heading.textContent
              .toLowerCase()
              .replace(/[^a-z0-9]/g, '-') // æ›¿æ¢æ‰€æœ‰éå­—æ¯æ•°å­—å­—ç¬¦
          );
        }

        const link = document.createElement('a');
        link.href = `#${heading.id}`;
        link.textContent = heading.textContent;
        link.classList.add('toc-link', `level-${heading.tagName[1]}`);

        if (heading.tagName === 'H2') {
          const parentDiv = toc.lastChild;
          if (parentDiv?.classList.contains('toc-parent')) {
            parentDiv.querySelector('.child-container').appendChild(link);
          }
        } else {
          const parentDiv = document.createElement('div');
          parentDiv.className = 'toc-parent';

          const toggleBtn = document.createElement('button');
          toggleBtn.className = 'toggle-btn';
          toggleBtn.textContent = 'â™ ';
          toggleBtn.addEventListener('click', () => {
            const child = parentDiv.querySelector('.child-container');
            child.classList.toggle('open');
            toggleBtn.textContent = child.classList.contains('open') ? 'â™¥' : 'â™ ';
          });

          const childContainer = document.createElement('div');
          childContainer.className = 'child-container';

          parentDiv.appendChild(toggleBtn);
          parentDiv.appendChild(link);
          parentDiv.appendChild(childContainer);
          toc.appendChild(parentDiv);
        }
      });
    }

    // æ»šåŠ¨ç›‘å¬ä¸é«˜äº® [[7]][[9]]
    window.addEventListener('scroll', () => {
      let currentSection = '';
      const scrollY = window.scrollY + 50; // åç§»é‡ä¼˜åŒ–

      document.querySelectorAll('h1, h2').forEach(section => {
        if (section.offsetTop <= scrollY) {
          currentSection = section.id;
        }
      });

      document.querySelectorAll('.toc-link').forEach(link => {
        link.classList.remove('active');
        if (link.hash === `#${currentSection}`) {
          link.classList.add('active');
          // è‡ªåŠ¨å±•å¼€çˆ¶å®¹å™¨
          const parent = link.closest('.toc-parent');
          if (parent) {
            parent.querySelector('.child-container').classList.add('open');
            parent.querySelector('.toggle-btn').textContent = 'â™¥';
          }
        }
      });
    });

    // ä¿®å¤å¹³æ»‘æ»šåŠ¨å¹¶æ·»åŠ è‡ªåŠ¨æŠ˜å åŠŸèƒ½
    document.addEventListener('DOMContentLoaded', () => {
      generateTOC();

      // æ–°å¢æ»šåŠ¨æ–¹å‘æ£€æµ‹ [[5]]
      let lastScrollPosition = window.scrollY;
      window.addEventListener('scroll', () => {
        const currentScroll = window.scrollY;
        const isScrollingUp = currentScroll < lastScrollPosition;

        // æ›´æ–°æ»šåŠ¨ä½ç½®è®°å½•
        lastScrollPosition = currentScroll;

        let currentSection = '';
        const scrollY = currentScroll + 100; // åç§»é‡ä¼˜åŒ–

        document.querySelectorAll('h2').forEach(section => {
          if (section.offsetTop <= scrollY) {
            currentSection = section.id;
          }
        });

        // å…³é—­æ‰€æœ‰éå½“å‰æ ‡é¢˜çš„å±•å¼€çŠ¶æ€
        document.querySelectorAll('.toc-parent').forEach(parent => {
          const childContainer = parent.querySelector('.child-container');
          if (!parent.contains(document.querySelector(`#${currentSection}`))) {
            childContainer.classList.remove('open');
            parent.querySelector('.toggle-btn').textContent = 'â™ ';
          }
        });

        // å¤„ç†å½“å‰æ¿€æ´»æ ‡é¢˜
        const activeLink = document.querySelector(`.toc-link[href="#${currentSection}"]`);
        if (activeLink) {
          activeLink.classList.add('active');
          activeLink.closest('.toc-parent').querySelector('.child-container').classList.add('open');
          activeLink.closest('.toc-parent').querySelector('.toggle-btn').textContent = 'â™¥';
        } else {
          document.querySelectorAll('.toc-link').forEach(link => link.classList.remove('active'));
        }

        // ç‰¹æ®Šå¤„ç†å‘ä¸Šæ»šåŠ¨åœºæ™¯ [[7]]
        if (isScrollingUp) {
          setTimeout(() => {
            document.querySelectorAll('.child-container.open').forEach(container => {
              if (container.getBoundingClientRect().top > window.innerHeight) {
                container.classList.remove('open');
                container.previousElementSibling.textContent = 'â™ ';
              }
            });
          }, 100);
        }
      });

      // ä¿®æ­£å¹³æ»‘æ»šåŠ¨ [[10]]
      document.querySelectorAll('.toc-link').forEach(link => {
        link.addEventListener('click', (e) => {
          e.preventDefault();
          const targetId = decodeURIComponent(link.hash); // è§£ç å¤„ç†
          const targetElement = document.querySelector(targetId);

          if (targetElement) {
            targetElement.scrollIntoView({
              behavior: 'smooth',
              block: 'start'
            });
          }
        });
      });
    });
    </script>
    <span class="print-footer">å˜é™ç§¯åˆ†æ±‚å¯¼çš„ç§ç§ - June 5, 2022 - L77</span>
    <footer>
  <hr class="slender_footer">
  <ul class="footer-links">   
    
      <li>
        <a href="//www.add-my-qq.com/2959807018"><span class="icon-QQ"></span></a>
      </li>
    
      <li>
        <a href="//github.com/FL77N"><span class="icon-github"></span></a>
      </li>
    
      <li>
        <a href="//www.zhihu.com/people/FromL77"><span class="icon-zhihu"></span></a>
      </li>
      
  </ul>
<div class="credits">
<span class="footer_word">&copy; 2025-2025 &nbsp;&nbsp;L77</span></br> <br>
<span class="footer_word">Powered By Jekyll And Tufte Theme</span>
</div>  
</footer>
    <!-- åœ¨bodyåº•éƒ¨æ–°å¢æŒ‰é’® -->
    <button id="backToTop" class="back-to-top">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
        <path fill="currentColor"
              d="M12 4l8 8H16v8H8v-8H4l8-8z"
              style="transform: rotate(0deg); transition: 0.3s;"/>
      </svg>
    </button>
  </body>
</html>